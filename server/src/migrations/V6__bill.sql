CREATE TABLE IF NOT EXISTS bill (
  id UUID NOT NULL,
  account_id UUID NOT NULL,
  category_id UUID,
  card_id UUID,
  root_bill_id UUID,
  type CHARACTER VARYING (64) NOT NULL,
  buy_date DATE NOT NULL,
  bill_date DATE NOT NULL,
  description CHARACTER VARYING (128) NOT NULL,
  amount DECIMAL(15, 2) NOT NULL,
  installments INTEGER,
  installment_index INTEGER,
  active BOOLEAN NOT NULL DEFAULT TRUE,
  created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL,
  CONSTRAINT bill_pk PRIMARY KEY (id),
  CONSTRAINT bill_1_fk FOREIGN KEY (account_id) REFERENCES account (id) ON UPDATE CASCADE ON DELETE CASCADE,
  CONSTRAINT bill_2_fk FOREIGN KEY (category_id) REFERENCES category (id) ON UPDATE CASCADE ON DELETE CASCADE,
  CONSTRAINT bill_3_fk FOREIGN KEY (card_id) REFERENCES card (id) ON UPDATE CASCADE ON DELETE CASCADE,
  CONSTRAINT bill_4_fk FOREIGN KEY (root_bill_id) REFERENCES bill (id) ON UPDATE CASCADE ON DELETE CASCADE
);
